import unittest
from src.crawler import Crawler

class TestCrawler(unittest.TestCase):

    def setUp(self):
        # Initialize the crawler with a base URL for each test
        self.base_url = 'http://example.com'
        self.crawler = Crawler(self.base_url)

    def test_crawl_returns_urls(self):
        # Test that crawling returns a non-empty list of URLs including the base URL
        urls = list(self.crawler.crawl())
        self.assertIsInstance(urls, list)
        self.assertIn(self.base_url, urls)

    def test_get_visited_urls(self):
        # Test that get_visited_urls returns a list after crawling
        list(self.crawler.crawl())
        found_urls = self.crawler.get_visited_urls()
        self.assertIsInstance(found_urls, list)
        self.assertIn(self.base_url, found_urls)

    def test_get_param_urls(self):
        # Test that get_param_urls returns a list (may be empty if no params found)
        list(self.crawler.crawl())
        param_urls = self.crawler.get_param_urls()
        self.assertIsInstance(param_urls, list)

if __name__ == '__main__':
    unittest.main()